<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        * {margin: 0; padding: 0; border: none;}
        .item {
            padding-left: 5px;
            padding-right: 5px;
            float: left;
            width: 180px;
            /*margin-left: 10px;*/
        }
        img {
            width: 180px;
            padding: 3px;
            border: 1px solid #ccc;
        }
    </style>
    <script>

        window.onload=window.onresize=function(){
            layout();
        };
        //方法可能用到多次
        function layout(){
            var items=document.getElementsByClassName('item');
            //document.documentElement.clientWidth;  获取浏览器的宽度
            //document.documentElement.clientHeight;  获取浏览器的高度
            //一共几列
            var column=Math.floor(document.documentElement.clientWidth/items[0].offsetWidth);
            var columnHeightArr=[];  /*放的是每一列的高度*/
            for(var i=0;i<items.length;i++){
                if(i<column){  /*第一行*/
                    items[i].style.position='static';
                    //每一列的高度放在数组里面
                    columnHeightArr.push(items[i].offsetHeight);
                }else{   /*第二行以后*/
                    //找出高度最矮的列
                    var minHeight=columnHeightArr[0];      /*找出最小高度的列*/
                    var minHeightIndex=0;   /*第几列*/
                    for(var j=0;j<columnHeightArr.length;j++){
                        if(minHeight>columnHeightArr[j]){
                            minHeight=columnHeightArr[j];   /*找出最小高度的列*/
                            minHeightIndex=j;  /*最小高度的列 是第几列*/
                        }
                    }
                    items[i].style.position='absolute';
                    //改变left值  left=列的left
                    items[i].style.left=items[minHeightIndex].offsetLeft+'px';
                    items[i].style.top=minHeight+'px';
                    //保存刚才添加数据的这一列的高度
                    columnHeightArr[minHeightIndex]+=items[i].offsetHeight;
                }
            }
        }

        //滚动事件
        window.onscroll = function(){
            //scrollTop
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            //页面高度
            var winHeight = document.documentElement.clientHeight;
            var items = document.getElementsByClassName("item");
            var lastItemBottom = items[items.length-1].offsetTop + items[items.length-1].offsetHeight;
            if ( scrollTop + winHeight >= lastItemBottom ) {
                //alert("已经到较下方了");
                //加载更多数据
                //创建div节点
                //<div class="item"> <img src="images/images1/img (1).jpg" /> </div>
                for (var i=1; i<9; i++){
                    var div = document.createElement("div");
                    div.className = "item";
                    div.innerHTML = "<img src='./img/0"+ i +".jpg' />";
                    document.body.appendChild(div);
                }
                //重新布局
                layout();
            }
        }
    </script>
</head>
<body>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/03.jpg" /> </div>
<div class="item"> <img src="./img/04.jpg" /> </div>
<div class="item"> <img src="./img/05.jpg" /> </div>
<div class="item"> <img src="./img/06.jpg" /> </div>
<div class="item"> <img src="./img/07.jpg" /> </div>
<div class="item"> <img src="./img/08.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/03.jpg" /> </div>
<div class="item"> <img src="./img/04.jpg" /> </div>
<div class="item"> <img src="./img/05.jpg" /> </div>
<div class="item"> <img src="./img/06.jpg" /> </div>
<div class="item"> <img src="./img/07.jpg" /> </div>
<div class="item"> <img src="./img/08.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/03.jpg" /> </div>
<div class="item"> <img src="./img/04.jpg" /> </div>
<div class="item"> <img src="./img/05.jpg" /> </div>
<div class="item"> <img src="./img/06.jpg" /> </div>
<div class="item"> <img src="./img/07.jpg" /> </div>
<div class="item"> <img src="./img/08.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/03.jpg" /> </div>
<div class="item"> <img src="./img/04.jpg" /> </div>
<div class="item"> <img src="./img/05.jpg" /> </div>
<div class="item"> <img src="./img/06.jpg" /> </div>
<div class="item"> <img src="./img/07.jpg" /> </div>
<div class="item"> <img src="./img/08.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
<div class="item"> <img src="./img/03.jpg" /> </div>
<div class="item"> <img src="./img/04.jpg" /> </div>
<div class="item"> <img src="./img/05.jpg" /> </div>
<div class="item"> <img src="./img/06.jpg" /> </div>
<div class="item"> <img src="./img/07.jpg" /> </div>
<div class="item"> <img src="./img/08.jpg" /> </div>
<div class="item"> <img src="./img/01.jpg" /> </div>
<div class="item"> <img src="./img/02.jpg" /> </div>
</body>
</html>